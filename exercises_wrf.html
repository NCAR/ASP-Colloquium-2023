

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Research and Forecasting Model (WRF) &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'exercises_wrf';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="WRF Test Case Study: Major Snowstorm December 16-17, 2020" href="exercises_wrf_test.html" />
    <link rel="prev" title="Community Earth System Model" href="exercises_cesm.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/ncar_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/ncar_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    2023 ASP Summer Colloquium
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="information.html">Local Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="before_arrival.html">Before you arrive</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedule.html">Colloquium Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="presenters.html">Presenters</a></li>
<li class="toctree-l1"><a class="reference internal" href="students.html">Student Attendees</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="exercises.html">Exercises</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="exercises_envs.html">Computing Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="exercises_cesm.html">Community Earth System Model</a></li>
<li class="toctree-l2 current active has-children"><a class="current reference internal" href="#">Weather Research and Forecasting Model (WRF)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="exercises_wrf_test.html">WRF Test Case Study: Major Snowstorm December 16-17, 2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercises_wrf_sens.html">WRF PBL Focused Sensitivity Experiments</a></li>

</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="exercises_class.html">Chemistry Land-surface Atmosphere Soil Slab model (CLASS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="exercises_obs.html">Observation Exercises</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fexercises_wrf.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/exercises_wrf.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Weather Research and Forecasting Model (WRF)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#with-these-exercises-we-hope-for-you-to-achieve">With these exercises we hope for you to achieve</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-model-cases-and-configurations">Description of Model Cases and Configurations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-run-of-wrf-cases">Test Run of WRF Cases</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="section" id="weather-research-and-forecasting-model-wrf">
<h1><a class="reference external" href="https://www.mmm.ucar.edu/models/wrf">Weather Research and Forecasting Model (WRF)</a><a class="headerlink" href="#weather-research-and-forecasting-model-wrf" title="Permalink to this headline">#</a></h1>
<p>The aim of this notebook is to run WRF regional initialized simulations of two events that have specific boundary layer structures of interest</p>
<div class="section" id="with-these-exercises-we-hope-for-you-to-achieve">
<h2>With these exercises we hope for you to achieve<a class="headerlink" href="#with-these-exercises-we-hope-for-you-to-achieve" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>An understanding of the workflow for a weather forecast model</p></li>
<li><p>The ability to perform basic sensitivity experiments</p></li>
<li><p>An understanding of how boundary layer evolution maybe impact forecast evolution</p></li>
<li><p>A baseline diagnosis of multiple WRF experiments</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To the greatest extent possible we will follow the <a class="reference external" href="https://www.mmm.ucar.edu/models/wrf">Weather Research and Forecasting Model (WRF)</a> <a class="reference external" href="https://www2.mmm.ucar.edu/wrf/users/wrf_users_guide/build/html/index.html">users’ guide</a> for setting up, submitting, running and processing output from simulations.</p>
</div>
</div>
<div class="section" id="description-of-model-cases-and-configurations">
<h2>Description of Model Cases and Configurations<a class="headerlink" href="#description-of-model-cases-and-configurations" title="Permalink to this headline">#</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">WRF</span></code> is able to simulation weatehr events in a regional domain over much of the globe, we will limit our experiments, at least initially to 2 case studiesthat will hopefully illusttae teh role of boundary layer processes in the evolution of these events</p>
</div>
<div class="section" id="test-run-of-wrf-cases">
<h2>Test Run of WRF Cases<a class="headerlink" href="#test-run-of-wrf-cases" title="Permalink to this headline">#</a></h2>
<p>Please follow as closely as possible the test cases of the <a class="reference external" href="https://www2.mmm.ucar.edu/wrf/users/">WRF users’ guide</a>, the <a class="reference external" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/index.php">online tutorial</a> and the <a class="reference external" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/compilation_tutorial.php#STEP7">accompanying tutorial</a> guide as closely as possible. Additionaly, there are number of great pre-recorded lectures from the WRF in-person tutorial <a class="reference external" href="https://www.youtube.com/playlist?list=PLJ_1sjucSSZCTNBRM4D3BfEak-XT7TKJo">here</a>. If you are unfamliar with WRF, of particular interest will be the <a class="reference external" href="https://www.youtube.com/watch?v=wzSu-343b-0&amp;list=PLJ_1sjucSSZCTNBRM4D3BfEak-XT7TKJo&amp;index=2&amp;t=480s">Introduction to WRF</a>, <a class="reference external" href="https://www.youtube.com/watch?v=fIbg5T-aUM4&amp;list=PLJ_1sjucSSZCTNBRM4D3BfEak-XT7TKJo&amp;index=4&amp;pp=iAQB">Running the WPS system</a>, <a class="reference external" href="https://www.youtube.com/watch?v=yixvMF-g0nc&amp;list=PLJ_1sjucSSZCTNBRM4D3BfEak-XT7TKJo&amp;index=5&amp;pp=iAQB">Running WRF</a> and importantly to <a class="reference external" href="https://www.youtube.com/watch?v=NPsotmEqTBw&amp;list=PLJ_1sjucSSZCTNBRM4D3BfEak-XT7TKJo&amp;index=15&amp;t=183s">Boundary Layer Physics</a> and <a class="reference external" href="https://www.youtube.com/watch?v=NmjL6uxwOkQ">Surface Process</a> avalailable.</p>
<p>If you are not currently on <code class="docutils literal notranslate"><span class="pre">Cheyenne</span></code> then login. The model will not compile and run properly on <code class="docutils literal notranslate"><span class="pre">Casper</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ssh -XY $USER@cheyenne.ucar.edu
</pre></div>
</div>
<p>Below is a condensed summary of the key steps. If you haven’t already create a ASP2023 work directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir /glade/work/$USER/ASP2023
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Download the WRF model code <a class="reference external" href="https://github.com/wrf-model/WRF"></a> and the WRF Pre-Processing System (WPS) code <a class="reference external" href="https://github.com/wrf-model/WRF/WPS"></a></p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /glade/work/$USER/ASP2023
git clone https://github.com/wrf-model/WRF
git clone https://github.com/wrf-model/WPS
</pre></div>
</div>
<p>We will return to the WPS code later.</p>
<ol class="arabic simple" start="2">
<li><p>Change to (checkout) the current version (4.5) release branch</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">WRF</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">release</span><span class="o">-</span><span class="n">v4</span><span class="mf">.5.1</span>
</pre></div>
</div>
<p>This now stages the code we need to use</p>
<ol class="arabic simple" start="3">
<li><p>Configure WRF</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span>
</pre></div>
</div>
<p>You will be presented with options, so make the following choices.</p>
<ul class="simple">
<li><p>Choose option <strong>13</strong> for serial generic intel</p></li>
<li><p>Then, choose option <strong>1</strong> basic nesting
This then generates the <code class="docutils literal notranslate"><span class="pre">configure.wrf</span></code> file if succesfull with the following end message</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*****************************************************************************</span>
<span class="n">This</span> <span class="n">build</span> <span class="n">of</span> <span class="n">WRF</span> <span class="n">will</span> <span class="n">use</span> <span class="n">NETCDF4</span> <span class="k">with</span> <span class="n">HDF5</span> <span class="n">compression</span>
<span class="o">*****************************************************************************</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Compile WRF</p></li>
</ol>
<p>Compile WRF where the build type is <code class="docutils literal notranslate"><span class="pre">em_real</span></code> to denote a real case study (as opposed to seomthing like <code class="docutils literal notranslate"><span class="pre">idealised</span></code>)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Below commands starting with <code class="docutils literal notranslate"><span class="pre">qcmd</span></code> push the work to a separate <code class="docutils literal notranslate"><span class="pre">compute</span> <span class="pre">node</span></code> to avoid congestion on the <code class="docutils literal notranslate"><span class="pre">login</span> <span class="pre">nodes</span></code></p>
</div>
<p>Need to do a small code grab first and then compile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">phys</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">submodules</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="o">..</span>
<span class="n">qcmd</span> <span class="o">--</span> <span class="o">./</span><span class="nb">compile</span> <span class="o">-</span><span class="n">j</span> <span class="mi">8</span> <span class="n">em_real</span> <span class="o">&gt;&amp;</span> <span class="n">log</span><span class="o">.</span><span class="n">compile</span>
</pre></div>
</div>
<p>Leave this running in your window until complete</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This compile can take up to 30 minutes so feel free to move onto some of the other project tasks in the mean time. Maybe start thinking about <a class="reference internal" href="exercises_wrf_sens.html"><span class="doc std std-doc">WRF sensitivity</span></a> experiments or starting with the <a class="reference internal" href="exercises_class.html"><span class="doc std std-doc">CLASS set-up</span></a> if you haven’t already.</p>
</div>
<ol class="arabic simple" start="5">
<li><p>Check build
When complete do a build check by viewing the end of the compile log file <code class="docutils literal notranslate"><span class="pre">log.compile</span></code></p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tail</span> <span class="n">log</span><span class="o">.</span><span class="n">compile</span>
</pre></div>
</div>
<p>If the code compiled correctly near the end you should see</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---&gt;</span>                  <span class="n">Executables</span> <span class="n">successfully</span> <span class="n">built</span>                  <span class="o">&lt;---</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need to recompile the whole set of executables for WPS and WRF run the local <code class="docutils literal notranslate"><span class="pre">/clean</span></code> command</p>
</div>
<ol class="arabic simple" start="6">
<li><p>Code and executable check
Once the compilation completes, to check whether it was successful, you need to look for executable in the <code class="docutils literal notranslate"><span class="pre">WRF/main</span></code> directory:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="n">main</span><span class="o">/*.</span><span class="n">exe</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>WPS code configure - find a more detailed description <a class="reference external" href="https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_v4/v4.4/users_guide_chap3.html">here</a>
Go to the WPS code based and select the right code <em>branch</em></p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">../</span><span class="n">WPS</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">release</span><span class="o">-</span><span class="n">v4</span><span class="mf">.5</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Configure WPS
As for WRF, configure WPS to be ready for compilation</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span>
</pre></div>
</div>
<p>You will be presented with compile/platform options, so make the following choices.</p>
<ul class="simple">
<li><p>Choose <strong>17</strong> for serial compile on intel
You should see a <code class="docutils literal notranslate"><span class="pre">configure.wps</span></code> file when this completes</p></li>
</ul>
<ol class="arabic simple" start="9">
<li><p>Compile WPS</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qcmd</span> <span class="o">--</span> <span class="o">./</span><span class="nb">compile</span> <span class="o">&gt;&amp;</span> <span class="nb">compile</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>This should take much less take than WRF (a few minutes)</p>
<p>If your compilation was successful, you should see these executables created in (make sure they are not of size zero)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geogrid</span><span class="o">.</span><span class="n">exe</span><span class="p">,</span> <span class="n">ungrib</span><span class="o">.</span><span class="n">exe</span><span class="p">,</span> <span class="n">metgrid</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If they are zero size type the following to see if there were errors output (i.e. does the word ‘error’ occur)</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grep</span> <span class="o">-</span><span class="n">i</span> <span class="n">error</span> <span class="nb">compile</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>This should have completed your setup. To summarize, this is the prestaging of code required for running WRF. It should not need to be repeated from now on, unless code is changed:
<img alt="" src="_images/WRF_WPS_flow.png" /></p>
<div class="admonition-summary-wrf-wps-workflow admonition">
<p class="admonition-title">Summary WRF/WPS Workflow</p>
<p><strong>WPS</strong><br />
<code class="docutils literal notranslate"><span class="pre">geogrid.exe</span></code> -  creates terrestrial data (static).<br />
<code class="docutils literal notranslate"><span class="pre">ungrib.exe</span></code> -  unpacks GRIB meteorological data and packs it into an intermediate file format.<br />
<code class="docutils literal notranslate"><span class="pre">metgrid.exe</span></code> - interpolates the meteorological data horizontally onto your model domain (WRF input)<br />
<strong>WRF</strong><br />
<code class="docutils literal notranslate"><span class="pre">real.exe</span></code> - vertically interpolates the data onto the model coordinates.<br />
<code class="docutils literal notranslate"><span class="pre">wrf.exe</span></code> - generates the model forecast.</p>
</div>
<p><strong>Now move on to running the <a class="reference internal" href="exercises_wrf_test.html"><span class="doc std std-doc">WRF control simulation</span></a> which specifies the domain</strong></p>
</div>
<div class="toctree-wrapper compound">
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "jbooks"
        },
        kernelOptions: {
            name: "jbooks",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'jbooks'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="exercises_cesm.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Community Earth System Model</p>
      </div>
    </a>
    <a class="right-next"
       href="exercises_wrf_test.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">WRF Test Case Study: Major Snowstorm December 16-17, 2020</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#with-these-exercises-we-hope-for-you-to-achieve">With these exercises we hope for you to achieve</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#description-of-model-cases-and-configurations">Description of Model Cases and Configurations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-run-of-wrf-cases">Test Run of WRF Cases</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>